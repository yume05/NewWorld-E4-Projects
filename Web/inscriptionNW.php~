<?php include './connect.php';
include './hautNW.php';
include './menuNW.php';
?>
<script type="text/javascript">
function verifForm(f)
{
   var loginOk = verifLogin(f.login);
   var nomOk = verifNom(f.nom);
   var prenomOk = verifPrenom(f.prenom);
   var mailOk = verifMail(f.email);
   var telOk = verifTel(f.tel);
   var cpOk = verifCP(f.cp);
   var villeOk = verifVille(f.ville);
   var rueOk = verifRue(f.rue);   
   if(loginOk && nomOk && prenomOk && mailOk && telOk && cpOk && villeOk && rueOk)
      return true;

   else
   {
      alert("Veuillez remplir correctement tous les champs");
      return false;
   }
}
function validate(champ){
	rib = document.getElementById("rib");
	siret= document.getElementById("siret");
	if (champ.name = "producteur"){
		rib.style.visibility = "visible";
		siret.style.visibility = "visible";
		
		
		
	}
}
function surligne(champ, erreur)
{
   if(erreur)
      champ.style.backgroundColor = "#fba";
   else
      champ.style.backgroundColor = "";
}
function verifLogin(champ)
{
   if(champ.value.length < 2 || champ.value.length > 25)
   {
      surligne(champ, true);
      return false;
   }
   else
   {
      surligne(champ, false);
      return true;
   }
}
function verifNom(champ)
{
   if(champ.value.length < 2 || champ.value.length > 35)
   {
      surligne(champ, true);
      return false;
   }
   else
   {
      surligne(champ, false);
      return true;
   }
}

function verifPrenom(champ)
{
   if(champ.value.length < 2 || champ.value.length > 35)
   {
      surligne(champ, true);
      return false;
   }
   else
   {
      surligne(champ, false);
      return true;
   }
}

function verifTel(champ)
{
   var regex = /^[0-9]{10,10}$/;
   if(!regex.test(champ.value))
   {
      surligne(champ, true);
      return false;
   }
   else
   {
      surligne(champ, false);
      return true;
   }
}
function verifCP(champ)
{
   var regex = /^[0-9]{5,5}$/;
   if(!regex.test(champ.value))
   {
      surligne(champ, true);
      return false;
   }
   else
   {
      surligne(champ, false);
      return true;
   }
}


function verifMail(champ)
{
   var regex = /^[a-zA-Z0-9._-]+@[a-z0-9._-]{2,}\.[a-z]{2,4}$/;
   if(!regex.test(champ.value))
   {
      surligne(champ, true);
      return false;
   }
   else
   {
      surligne(champ, false);
      return true;
   }
}
function verifVille(champ)
{
   if(champ.value.length < 2 || champ.value.length > 45)
   {
      surligne(champ, true);
      return false;
   }
   else
   {
      surligne(champ, false);
      return true;
   }
}
function verifRue(champ)
{
   if(champ.value.length < 2 || champ.value.length > 40)
   {
      surligne(champ, true);
      retu-rn false;
   }
   else
   {
      surligne(champ, false);
      return true;
   }
}
function verifRib(champ)
{
   if(champ.value.length < 2 || champ.value.length > 7)
   {
      surligne(champ, true);
      retu-rn false;
   }
   else
   {
      surligne(champ, false);
      return true;
   }
}
function verifSiret(champ)
{
 var regex = /^[0-9]{9,14}$/;
   if(!regex.test(champ.value))
   {
      surligne(champ, true);
      return false;
   }
   else
   {
      surligne(champ, false);
      return true;
   }
}

</script>

<div id="corpsNW">
<form method="post" action="albert.php" id="formulaireInscription" onsubmit="return verifForm(this)" enctype="multipart/form-data">
<h1>INSCRIPTION</h1>
<fieldset>
<fieldset><legend>Informations</legend>

<label for="login">*<?php echo $labelLogin; ?> :</label> <input name="login" type="text" id="login" onblur="verifLogin(this)" /></br>
<label for="nom">*<?php echo $labelFirstName; ?>:</label>  <input name="nom" type="text" id="nom" onblur="verifNom(this)" /></br>
<label for="prenom">*<?php echo $labelLastName; ?> :</label> <input name="prenom" type="text" id="prenom" onblur="verifPrenom(this)" /></br>


</fieldset>
<fieldset><legend>Contacts</legend>

<label for="email">*<?php echo $labelLogin; ?>:</label><input type="email" name="email" id="email" onblur="verifMail(this)"/><br />
<label for="tel">V<?php echo $labelLogin; ?> :</label><input type="tel" name="tel" id="tel" onblur="verifTel(this)" ><br />

</fieldset>

<fieldset><legend>Informations supplémentaires</legend>
<label for="cp">* Code Postal :</label><input type="text" name="cp" id="cp" onblur="verifCP(this)" /></br>
<label for="rue">* Rue :</label><input type="text" name="rue" id="rue" onblur="verifRue(this)" /></br>
<label for="ville">* Ville :</label><input type="text" name="ville" id="ville" onblur="verifVille(this)" />

</fieldset>

<fieldset><legend>Type</legend>


<input type= "radio" name="type" value="C" onblur="validate(this)"> Consommateur <br>
<input type= "radio" name="type" value="V" onblur="validate(this)"> Point de vente</br>
<input type= "radio" name="type" value="P" onblur="validate(this)"> Producteur</br>
</fieldset>

<!--
<label for="rib">* RIB : </label><input type= "hidden" name="rib" onblur="verifRib(this)" /><br>
<label for="siret">*Siret : </label><input type="hidden" name="siret" onblur="verifSiret(this)" /><br>-->

<p>Un mot de passe aléatoire vous sera envoyé par mail</p>
<p>Les champs précédés d un * sont obligatoires</p>
<p><input type="submit" value="S'inscrire" /></p>
</fieldset>
</form>
</div>
<?php
include './partieGriseNW.php';
include './basNW.php';
?>
